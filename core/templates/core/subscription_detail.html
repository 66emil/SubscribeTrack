{% extends 'core/base.html' %}

{% block title %}–ü–æ–¥–ø–∏—Å–∫–∞ {{ subscription.company.name }} - –ú–µ–Ω–µ–¥–∂–µ—Ä –ü–æ–¥–ø–∏—Å–æ–∫{% endblock %}

{% block content %}
<div class="card">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h1>üí≥ –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ {{ subscription.company.name }}</h1>
        <div>
            <a href="{% url 'subscription-list' %}" class="btn btn-secondary">–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</a>
            <a href="{% url 'subscription-update' subscription.pk %}" class="btn">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
            <a href="{% url 'subscription-delete' subscription.pk %}" class="btn btn-danger">–£–¥–∞–ª–∏—Ç—å</a>
        </div>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
        <div>
            <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–ø–∏—Å–∫–µ</h3>
            <div style="margin-top: 15px;">
                <p style="margin-bottom: 10px;"><strong>–ö–æ–º–ø–∞–Ω–∏—è:</strong> 
                    <a href="{% url 'company-detail' subscription.company.pk %}">{{ subscription.company.name }}</a>
                </p>
                <p style="margin-bottom: 10px;"><strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</strong> 
                    <a href="{% url 'category-detail' subscription.company.category.pk %}">{{ subscription.company.category.name }}</a>
                </p>
                <p style="margin-bottom: 10px;"><strong>–ü–ª–∞–Ω:</strong> {{ subscription.plan_name }}</p>
                <p style="margin-bottom: 10px;"><strong>–¶–µ–Ω–∞:</strong> 
                    <span style="font-size: 1.3rem; color: #2c3e50; font-weight: bold;">{{ subscription.price }} ‚ÇΩ</span>
                </p>
                <p style="margin-bottom: 10px;"><strong>–ü–µ—Ä–∏–æ–¥ –æ–ø–ª–∞—Ç—ã:</strong> {{ subscription.get_billing_period_display }}</p>
                <p style="margin-bottom: 10px;"><strong>–°—Ç–∞—Ç—É—Å:</strong> 
                    <span style="padding: 4px 8px; border-radius: 4px; 
                        {% if subscription.status == 'active' %}background: #d4edda; color: #155724;
                        {% elif subscription.status == 'cancelled' %}background: #f8d7da; color: #721c24;
                        {% elif subscription.status == 'expired' %}background: #d6d8d9; color: #383d41;
                        {% elif subscription.status == 'paused' %}background: #fff3cd; color: #856404;
                        {% endif %}">
                        {{ subscription.get_status_display }}
                    </span>
                </p>
            </div>
        </div>

        <div>
            <h3>–î–∞—Ç—ã</h3>
            <div style="margin-top: 15px;">
                <p style="margin-bottom: 10px;"><strong>–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞:</strong> {{ subscription.start_date|date:"d.m.Y" }}</p>
                <p style="margin-bottom: 10px;"><strong>–°–ª–µ–¥—É—é—â–∏–π –ø–ª–∞—Ç–µ–∂:</strong> 
                    <span style="color: #e74c3c; font-weight: bold;">{{ subscription.next_billing_date|date:"d.m.Y" }}</span>
                </p>
                {% if subscription.end_date %}
                    <p style="margin-bottom: 10px;"><strong>–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è:</strong> {{ subscription.end_date|date:"d.m.Y" }}</p>
                {% endif %}
                <p style="margin-bottom: 10px;"><strong>–°–æ–∑–¥–∞–Ω–æ:</strong> {{ subscription.created_at|date:"d.m.Y H:i" }}</p>
                <p style="margin-bottom: 10px;"><strong>–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:</strong> {{ subscription.updated_at|date:"d.m.Y H:i" }}</p>
            </div>
        </div>
    </div>

    {% if subscription.notes %}
        <div style="margin-top: 30px;">
            <h3>–ó–∞–º–µ—Ç–∫–∏</h3>
            <div style="margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 4px;">
                {{ subscription.notes|linebreaks }}
            </div>
        </div>
    {% endif %}

    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ -->
    <div style="margin-top: 30px; padding: 15px; 
        {% if subscription.is_active %}background: #d4edda; border-left: 4px solid #28a745;
        {% else %}background: #f8d7da; border-left: 4px solid #dc3545;{% endif %}
        border-radius: 4px;">
        {% if subscription.is_active %}
            <strong>‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞</strong>
        {% else %}
            <strong>‚ùå –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞</strong>
        {% endif %}
    </div>
</div>
{% endblock %}

